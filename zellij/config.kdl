// Zellij Configuration
// Uses native keybinds (Ctrl+p pane, Ctrl+t tab, Ctrl+n resize, Ctrl+s scroll, Ctrl+o session)

// Appearance
pane_frames true
theme "vscode-dark"
ui {
    pane_frames {
        rounded_corners true
    }
}

// Session persistence
session_serialization true
serialize_pane_viewport true

// Behavior
default_mode "normal"
mouse_mode true
copy_on_select true
scrollback_editor "nvim"

// Plugins (loaded at startup)
load_plugins {
    "https://github.com/Cynary/zellij-tab-name/releases/download/v0.4.1/zellij-tab-name.wasm"
}

// Theme: VS Code Dark+ (bright colors from iTerm2-Color-Schemes)
themes {
    vscode-dark {
        fg "#cccccc"
        bg "#1e1e1e"
        black "#666666"
        red "#f14c4c"
        green "#23d18b"
        yellow "#f5f543"
        blue "#3b8eea"
        magenta "#d670d6"
        cyan "#29b8db"
        white "#e5e5e5"
        orange "#f14c4c"
        frame_unselected {
            base 102 102 102
            background 30 30 30
            emphasis_0 102 102 102
            emphasis_1 102 102 102
            emphasis_2 102 102 102
            emphasis_3 102 102 102
        }
        frame_selected {
            base 35 209 139
            background 30 30 30
            emphasis_0 35 209 139
            emphasis_1 35 209 139
            emphasis_2 35 209 139
            emphasis_3 35 209 139
        }
    }
}

// Keybind additions (extend defaults, don't replace)
keybinds {
    // Rebind modes for ergonomics (Ctrl+o conflicts with Claude)
    shared_except "locked" {
        unbind "Ctrl o"
        unbind "Ctrl t"
        unbind "Alt f"  // Allow Opt+Right (forward-word) to pass through
        bind "Ctrl b" { SwitchToMode "Session"; }  // was Ctrl+o
        bind "Ctrl ." { SwitchToMode "Tab"; }      // was Ctrl+t
        bind "Alt ;" { ToggleFloatingPanes; }
    }
    // Launch zellij-forgot with Ctrl+y for keybind hints
    shared_except "locked" {
        bind "Ctrl y" {
            LaunchOrFocusPlugin "https://github.com/karimould/zellij-forgot/releases/latest/download/zellij_forgot.wasm" {
                floating true
                "LOAD_ZELLIJ_BINDINGS" "true"
            }
        }
    }
    // Launch room with Ctrl+Space for tab switching
    shared_except "locked" {
        bind "Ctrl Space" {
            LaunchOrFocusPlugin "https://github.com/rvcas/room/releases/latest/download/room.wasm" {
                floating true
                ignore_case true
                quick_jump true
            }
        }
    }
}
